(() => { "use strict"; function e(t) { return e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, e(t) } function t(e, t) { for (var n = 0; n < t.length; n++) { var o = t[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, r(o.key), o) } } function n(e, t, n) { return (t = r(t)) in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function r(t) { var n = function (t, n) { if ("object" !== e(t) || null === t) return t; var r = t[Symbol.toPrimitive]; if (void 0 !== r) { var o = r.call(t, "string"); if ("object" !== e(o)) return o; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(t) }(t); return "symbol" === e(n) ? n : String(n) } const o = function () { function e(t, r) { var o = this, i = t.data, u = t.handleCardClick; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), n(this, "_handeleDelete", (function () { o._element.remove() })), n(this, "_handeleLike", (function () { o._buttonLike.classList.toggle("photo__like-active") })), this._name = i.name, this._link = i.link, this._templateSelector = r, this._handleCardClick = u } var r, o; return r = e, (o = [{ key: "_getCardTemplate", value: function () { return document.querySelector(this._templateSelector).content.querySelector(".photo__white").cloneNode(!0) } }, { key: "getCard", value: function () { return this._element = this._getCardTemplate(), this._elementCard = this._element.querySelector(".photo__element"), this._elementCard.src = this._link, this._elementCard.alt = this._name, this._element.querySelector(".photo__text").textContent = this._name, this._deleteButton = this._element.querySelector(".photo__basket"), this._buttonLike = this._element.querySelector(".photo__like-button"), this._setEventListeners(), this._element } }, { key: "_setEventListeners", value: function () { var e = this; this._deleteButton.addEventListener("click", this._handeleDelete), this._buttonLike.addEventListener("click", this._handeleLike), this._elementCard.addEventListener("click", (function () { return e._handleCardClick(e._name, e._link) })) } }]) && t(r.prototype, o), Object.defineProperty(r, "prototype", { writable: !1 }), e }(); function i(e) { return i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, i(e) } function u(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, l(r.key), r) } } function a(e, t, n) { return (t = l(t)) in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function l(e) { var t = function (e, t) { if ("object" !== i(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== i(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" === i(t) ? t : String(t) } var c = function () { function e(t, n) { var r = this; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), a(this, "_showInputError", (function (e, t) { var n = r._formElement.querySelector("#error-".concat(e.id)); e.classList.add(r.validatorConfig.inputErrorClass), n.textContent = t, n.classList.add(r.validatorConfig.errorClass) })), a(this, "_hideInputError", (function (e) { var t = r._formElement.querySelector("#error-".concat(e.id)); e.classList.remove(r.validatorConfig.inputErrorClass), t.classList.remove(r.validatorConfig.errorClass), t.textContent = "" })), this.validatorConfig = t, this._formElement = n, this._inputList = Array.from(this._formElement.querySelectorAll(this.validatorConfig.inputSelector)), this._buttonElement = this._formElement.querySelector(this.validatorConfig.submitButtonSelector) } var t, n; return t = e, (n = [{ key: "_isValid", value: function (e) { e.validity.valid ? this._hideInputError(e) : this._showInputError(e, e.validationMessage) } }, { key: "_setEventListeners", value: function () { var e = this; this._toggleButtonStatus(), this._formElement.addEventListener("reset", (function () { setTimeout((function () { e._toggleButtonStatus() }), 0) })), this._inputList.forEach((function (t) { t.addEventListener("input", (function () { e._isValid(t), e._toggleButtonStatus() })) })) } }, { key: "enableValidation", value: function () { this._formElement.addEventListener("submit", (function (e) { e.preventDefault() })), this._setEventListeners() } }, { key: "_hasInvalidInput", value: function () { return this._inputList.some((function (e) { return !e.validity.valid })) } }, { key: "_toggleButtonStatus", value: function () { this._hasInvalidInput() ? (this._buttonElement.classList.add(this.validatorConfig.inactiveButtonClass), this._buttonElement.setAttribute("disabled", "true")) : (this._buttonElement.classList.remove(this.validatorConfig.inactiveButtonClass), this._buttonElement.removeAttribute("disabled")) } }, { key: "resetValidation", value: function () { var e = this; this._toggleButtonStatus(), this._inputList.forEach((function (t) { e._hideInputError(t) })) } }]) && u(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); const s = c; function p(e) { return p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, p(e) } function f(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, (void 0, o = function (e, t) { if ("object" !== p(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== p(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(r.key), "symbol" === p(o) ? o : String(o)), r) } var o } var y = function () { function e(t, n) { var r = t.items, o = t.renderer; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), this._items = r, this._renderer = o, this._container = n } var t, n; return t = e, (n = [{ key: "addItem", value: function (e) { this._container.append(e) } }, { key: "renderItems", value: function () { var e = this; this._items.forEach((function (t) { e._renderer(t) })) } }, { key: "newAddItem", value: function (e) { this._container.prepend(e) } }]) && f(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); function m(e) { return m = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, m(e) } function d(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, v(r.key), r) } } function v(e) { var t = function (e, t) { if ("object" !== m(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== m(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" === m(t) ? t : String(t) } var b = function () { function e(t) { var n, r, o, i = this; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), n = this, o = function (e) { "Escape" === e.key && i.close() }, (r = v(r = "_handleEscClose")) in n ? Object.defineProperty(n, r, { value: o, enumerable: !0, configurable: !0, writable: !0 }) : n[r] = o, this._popup = t } var t, n; return t = e, (n = [{ key: "open", value: function () { this._popup.classList.add("popup_opened"), document.addEventListener("keydown", this._handleEscClose) } }, { key: "close", value: function () { this._popup.classList.remove("popup_opened"), document.removeEventListener("keydown", this._handleEscClose) } }, { key: "setEventListeners", value: function () { var e = this; this._popup.addEventListener("mousedown", (function (t) { (t.target.classList.contains("popup_opened") || t.target.classList.contains("popup__close")) && e.close() })) } }]) && d(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); function h(e) { return h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, h(e) } function _(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, (void 0, o = function (e, t) { if ("object" !== h(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== h(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(r.key), "symbol" === h(o) ? o : String(o)), r) } var o } function g() { return g = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, n) { var r = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = w(e));); return e }(e, t); if (r) { var o = Object.getOwnPropertyDescriptor(r, t); return o.get ? o.get.call(arguments.length < 3 ? e : n) : o.value } }, g.apply(this, arguments) } function S(e, t) { return S = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, S(e, t) } function w(e) { return w = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, w(e) } var E = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && S(e, t) }(u, e); var t, n, r, o, i = (r = u, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = w(r); if (o) { var n = w(this).constructor; e = Reflect.construct(t, arguments, n) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === h(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function u(e) { var t; return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, u), (t = i.call(this, e))._title = t._popup.querySelector(".popup__caption"), t._image = t._popup.querySelector(".popup__img"), t._alt = t._image, t } return t = u, (n = [{ key: "open", value: function (e, t, n) { g(w(u.prototype), "open", this).call(this), this._title.textContent = e, this._image.src = t, this._alt.alt = n } }]) && _(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), u }(b); function k(e) { return k = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, k(e) } function j(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, (void 0, o = function (e, t) { if ("object" !== k(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== k(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(r.key), "symbol" === k(o) ? o : String(o)), r) } var o } function C() { return C = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, n) { var r = function (e, t) { for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = P(e));); return e }(e, t); if (r) { var o = Object.getOwnPropertyDescriptor(r, t); return o.get ? o.get.call(arguments.length < 3 ? e : n) : o.value } }, C.apply(this, arguments) } function O(e, t) { return O = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) { return e.__proto__ = t, e }, O(e, t) } function P(e) { return P = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (e) { return e.__proto__ || Object.getPrototypeOf(e) }, P(e) } var L = function (e) { !function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), Object.defineProperty(e, "prototype", { writable: !1 }), t && O(e, t) }(u, e); var t, n, r, o, i = (r = u, o = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (e) { return !1 } }(), function () { var e, t = P(r); if (o) { var n = P(this).constructor; e = Reflect.construct(t, arguments, n) } else e = t.apply(this, arguments); return function (e, t) { if (t && ("object" === k(t) || "function" == typeof t)) return t; if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined"); return function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) }(this, e) }); function u(e, t) { var n, r = t.handleFormSubmit; return function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, u), (n = i.call(this, e))._handleFormSubmit = r, n._popupForm = n._popup.querySelector(".popup__form"), n._popupFormInputs = Array.from(n._popup.querySelectorAll(".popup__input")), n } return t = u, (n = [{ key: "_getInputValues", value: function () { var e = this; return this._popupFormInputsValues = {}, this._popupFormInputs.forEach((function (t) { e._popupFormInputsValues[t.name] = t.value })), this._popupFormInputsValues } }, { key: "close", value: function () { C(P(u.prototype), "close", this).call(this), this._popupForm.reset() } }, { key: "setEventListeners", value: function () { var e = this; C(P(u.prototype), "setEventListeners", this).call(this), this._popupForm.addEventListener("submit", (function (t) { t.preventDefault(), e._handleFormSubmit(e._getInputValues()), e.close() })) } }]) && j(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), u }(b); function q(e) { return q = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, q(e) } function I(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, (void 0, o = function (e, t) { if ("object" !== q(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== q(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(r.key), "symbol" === q(o) ? o : String(o)), r) } var o } var T = function () { function e(t) { var n = t.name, r = t.description; !function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }(this, e), this._userName = n, this._userDescription = r } var t, n; return t = e, (n = [{ key: "getUserInfo", value: function () { return { name: this._userName.textContent, description: this._userDescription.textContent } } }, { key: "setUserInfo", value: function (e) { var t = e.name, n = e.description; this._userName.textContent = t, this._userDescription.textContent = n } }]) && I(t.prototype, n), Object.defineProperty(t, "prototype", { writable: !1 }), e }(); var x = { formSelector: ".popup__form", inputSelector: ".popup__input", submitButtonSelector: ".popup__submit", inactiveButtonClass: "popup__submit_disabled", inputErrorClass: "popup__input_type_error", errorClass: "popup__input-error_active" }, R = document.querySelector(".popup_type_show-image"), B = (R.querySelector(".popup__img"), R.querySelector(".popup__caption"), document.querySelector(".profile__button")), F = document.querySelector(".popup_profile"), V = document.querySelector(".popup__input-name"), D = document.querySelector(".popup__input-job"), A = (document.querySelector(".popup__form_profile"), document.querySelector(".profile__name")), N = document.querySelector(".profile__nickname"), U = document.querySelector(".profile__add"), z = document.querySelector(".popup_add-place"), M = document.querySelector(".popup__form_place"), G = (M.querySelector(".popup__input_place-name"), M.querySelector(".popup__input_place-link"), document.querySelector(".photo__elements")), H = new E(R); function J(e) { return new o({ data: e, handleCardClick: function (e, t) { H.open(e, t) } }, "#white-template").getCard() } H.setEventListeners(); var K = new y({ items: [{ name: "Архыз", link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg" }, { name: "Челябинская область", link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg" }, { name: "Иваново", link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg" }, { name: "Камчатка", link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg" }, { name: "Холмогорский район", link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg" }, { name: "Байкал", link: "https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg" }], renderer: function (e) { K.addItem(J(e)) } }, G); K.renderItems(); var Q = new T({ name: A, description: N }), W = new L(F, { handleFormSubmit: function (e) { var t = { name: e["input-name"], description: e["input-job"] }; console.log(e), Q.setUserInfo(t) } }); W.setEventListeners(), B.addEventListener("click", (function () { Y.resetValidation(), W.open(); var e = Q.getUserInfo(); V.value = e.name, D.value = e.description, console.log(e) })); var X = new L(z, { handleFormSubmit: function (e) { var t = { name: e["input-name-add-place"], link: e["input-job-add-place"] }; K.newAddItem(J(t)), console.log(e), console.log(t) } }); X.setEventListeners(), U.addEventListener("click", (function () { X.open(), Z.resetValidation() })); var Y = new s(x, F); Y.enableValidation(); var Z = new s(x, z); Z.enableValidation() })();